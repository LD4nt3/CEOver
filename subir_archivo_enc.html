<!DOCTYPE html>
<html>
<head>
  <script type="text/javascript">
    
var expanded = false;

function showCheckboxes() {
  var checkboxes = document.getElementById("checkboxes");
  if (!expanded) {
    checkboxes.style.display = "block";
    expanded = true;
  } else {
    checkboxes.style.display = "none";
    expanded = false;
  }
}


    function habilita(form)

{ 

$.ajax({
   url: 'subir_grupal.php',
   success: function (response) {
    $("#demo").html(response);
   }
});
}

function deshabilita(form)
{ 
 document.getElementById("demo").innerHTML = " ";
}

  function habilita2(form2)

{ 
$.ajax({
   url: 'subir_individual.php',
   success: function (response) {
    $("#hi").html(response);
   }
});
}

function deshabilita2(form2)
{ 
 document.getElementById("hi").innerHTML = "  ";
}

function check1(box) {
if (box.checked) {

document.getElementById("checkbox2").checked=false;
 deshabilita();

}
}
function check2(box) {
if (box.checked) {
document.getElementById("checkbox1").checked=false;
deshabilita2(); 
}
}

  </script>
	<title>Bienvenido</title>
	<style type="text/css">footer {
  background-color: rgb(238, 238, 238);
  position:fixed;
  bottom: 0;
  width: 100%;
  height: 40px;
  color: black;
}
.multiselect {
  width: 400px;
}

.selectBox {
  position: relative;
}

.selectBox select {
  width: 100%;
  font-weight: bold;
}

.overSelect {
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
}

#checkboxes {
  display: none;
 background-color: #fff;
  border: 1px #000   solid;
}

#checkboxes label {
  display: block;
}

#checkboxes label:hover {
  background-color: #1e90ff;
}
hr2 { 
    display: block;
    margin-top: 1em;
    margin-bottom: 1em;
    margin-left: 5em;
    margin-right: 5em;
    border-style: inset;
    border-width: 2px;
}
      .center {
    text-align: center;
}
.grid-container {
  display: grid;
  grid-template-columns: auto auto auto;
margin-left: 90px;
margin-right: 90px;
  padding: 0.1px;
}

.grid-item {

  border: 1px solid rgba(0, 0, 0, 0.8);
  padding: 20px;
  font-size: 20px;
  text-align: center;
}
button[value="hide"]{
display:none;
}
	</style>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<link crossorigin="anonymous" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" rel="stylesheet" />
	<link href="https://fonts.googleapis.com/css?family=VT323" rel="stylesheet" />
  <script>
  $(function() {

      $.ajax({
   url: 'red.php',
   success: function (response) {//response is value returned from php (for your example it's "bye bye"
    if(response==0){window.location = "http://ceover.com/home.html";}
    console.log(response);
   }
}); 

      
  });
  </script>
           <script>
  $(function() {

      $.ajax({
   url: 'YMCANOR.php',
   success: function (response) {//response is value returned from php (for your example it's "bye bye"
    if(response==0){window.location = "http://ceover.com/home.html";}
    console.log(response);}
}); 

      
  });
  </script>
</head>
<body background="https://www.beautycolorcode.com/8ed8e8.png">
<div style="background:#eee;border:1px solid #ccc;padding:5px 10px;">
<p style="text-align:center"><img alt="" height="118" src="https://cdn.discordapp.com/attachments/448707323125432320/499437628802727955/ohhh3.png" width="1184" /></p>
</div>

<nav class='navbar navbar-inverse'>
  <div class='container-fluid'>
    <div class='navbar-header'>
      <a class='navbar-brand' href='#'>Ceover</a>
    </div>
    <ul class='nav navbar-nav'>
     
  <li><a href='trabajos_generales_encargado.html' >  &nbsp;Regresar&nbsp;&nbsp;&nbsp;  </a></li>

 <li><a href='salir.php' > &nbsp;Salir  </a></li>
 

    </ul>

  </div>
</nav>
<footer>
<p style="text-align: right;"><a href="https://img.youtube.com/vi/_ESprkRgmjU/mqdefault.jpg">Aviso legal</a>&nbsp;&nbsp;|<a href="https://img.youtube.com/vi/_ESprkRgmjU/mqdefault.jpg">&nbsp;Terminos y condiciones&nbsp;<br />
<img alt="mail" height="23" src="http://iblogbox.github.io/js/htmleditor/ckeditor-4.4.7/plugins/smiley/images/envelope.png" title="mail" width="23" /></a>ploisla8989@gmail.com</p>
</footer>

<p style="text-align: center;">&nbsp;</p>

<p style="text-align: center;"><span style="font-size:24px;"><b>&iexcl;Sube un trabajo nuevo</b></span><b style="font-size: 24px;">!</b>
 

</p>
<hr2></hr2>



<div class="grid-container">
<div class='grid-item'>


<form>
<h4 >Elige: <input name="form2" form="jo" type="checkbox" id="checkbox1" value="form2" onclick="check1(this)" onchange="if(this.checked == true){habilita2(this.form)} else{deshabilita2(this.form)}" />Trabajo individual.<input name="form" id="checkbox2" type="checkbox" onclick="check2(this)" value="form"  onchange="if(this.checked == true){habilita(this.form)} else{deshabilita(this.form)}" />Trabajo Grupal. 
 

  </h4>
</form>
<form id="jo">
<div id="hi"></div>
<div id="demo" name="demo"></div>
<b>Nombre del Trabajo: </b><input id='trabajo' name='trabajo' type='text'  required/><br/>

<p style='margin-left: 80px;'><b>Fecha de inicio:&nbsp; &nbsp; </b> <input id='tiempo_i' name='tiempo_i' type='date'  required/>Hora Inicial:<input id='hora_i' name='hora_i' type='time'  required/>
<br/><b>Fecha de entrega:</b><input id='tiempo_f' name='tiempo_f' type='date'  />Hora Final: <input id='hora_f' name='hora_f' type='time' required /><br><b>Observaciones:</b><br><textarea  rows='4' cols='43' id='obs' name="obs" required></textarea> </p>
  


</div>
<div class='grid-item'>

  </div>
</div>

<div align="center"><input type="submit" value="Terminar y subir trabajo"/></div>
</form>
<script>
$(function()
{
  $( "#jo" ).submit(function() {
    event.preventDefault();

   var res=0;  
   var item2=0;  
// 
var check = document.getElementById("checkbox1").checked;
if (check==true) {
  item2 = document.getElementById("item").value;
}else{
 jsonObj = []

var item= document.getElementsByClassName("checks");

    for (var i = 0;i<item.length; i++) { 

           if (item[i].checked==true) {

            

             a = {}
        a ["pk"] = item[i].value;
 
    jsonObj.push(a);
          }
                      
}
var res = JSON.stringify(jsonObj);

}

           
      var tiempo_i = document.getElementById("tiempo_i").value;
  var tiempo_f = document.getElementById("tiempo_f").value;
   var hora_i = document.getElementById("hora_i").value;
  var hora_f = document.getElementById("hora_f").value;
                  var trabajo= document.getElementById("trabajo").value;
                                    var obs= document.getElementById("obs").value;
                                     
/*console.log("Hello world!");
           for (var i = 0;i<z.length; i++) { 
             item = {}
        item ["nombre"] = x[i].value;
        item ["pk"] = z[i].value;
 
    jsonObj.push(item);
                      
}


var res = JSON.stringify(jsonObj);
console.log(res);*/
    var f = new Date();
    var minutos =  f.getMinutes();
    var horas =  f.getHours();//24

    var dia =  f.getDate();
    var mes = f.getMonth() +1;
    var An = f.getFullYear();
    var res1=tiempo_i.split("-");
    var res2=tiempo_f.split("-");
    var inicial=hora_i.split(":");
    var final=hora_f.split(":");


    var Ax = res1[0];
 
     var Mx = res1[1];

      var Dx = res1[2];
      var total=0;
      if (tiempo_i==tiempo_f) {

        var horai=inicial[0]; var horai1=horai/24;
var minutosi=inicial[1];var minutosi1=minutosi/1440;
var totalinicial=horai1+minutosi1;



var horaf=final[0]; var horaf1=horaf/24;
var minutosf=final[1]; var minutosf1=minutosf/1440;
var totalfinal=horaf1+minutosf1;
  total=totalfinal-totalinicial;

      }
     



    var Ax2 = res2[0];
     var Mx2 = res2[1];
      var Dx2 = res2[2];

      var diasT=0; 
          var diasT2=0;

  //1440
     var  AnU=Ax2-Ax;
     diasT=AnU*365;
var dia1=Dx2-Dx;
var mes1=Mx2-Mx; 

        diasT=diasT+dia1;
        diasT=diasT+(mes1*30.41);    


         var AnU2=Ax2-An;
    diasT2=AnU2*365;
var dia2=Dx2-dia;
var mes2=Mx2-mes;

        diasT2=diasT2+dia2;
        diasT2=diasT2+(mes2*30.41); 
  
        
        if (diasT<0 || diasT2<0 || total<0) {
        alert("La fecha introducida es invalida"); 
        }else{



    var parametros={
                "item" : item2,
                 "res" : res,
                "tiempo_i" : tiempo_i,
               "tiempo_f" : tiempo_f,
                    "hora_i" : hora_i,
               "hora_f" : hora_f,
                 "trabajo" : trabajo,
                  "obs" : obs

    };

          
   $("input[type='submit']", this)
      .val("Please Wait...")
      .attr('disabled', 'disabled');
   
    $.ajax({
    type: "POST",
    url: 'enviar_enc.php',
    data: parametros ,  

                    success:  function (response) { //una vez que el archivo recibe el request lo procesa y lo devuelve
                    alert("se agrego con exito tu nuevo trabajo");
                   window.location = "trabajos_generales_encargado.html" ;
                }
});
} 
  return false;

   
    
     });
});
</script>


<p>&nbsp;</p> 


<p><hr2></hr2></p>

<p>&nbsp;</p>

<p>&nbsp;</p>
</body>
</html>
